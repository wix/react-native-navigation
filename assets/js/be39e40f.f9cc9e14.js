(window.webpackJsonp=window.webpackJsonp||[]).push([[532],{603:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",function(){return l}),n.d(t,"metadata",function(){return c}),n.d(t,"toc",function(){return p}),n.d(t,"default",function(){return u});var a=n(3),i=n(7),o=(n(0),n(785));const r=["components"],l={id:"installing",title:"Installation",sidebar_label:"Installation"},c={unversionedId:"docs/installing",id:"docs/installing",isDocsHomePage:!1,title:"Installation",description:"Requirements",source:"@site/docs/docs/docs-Installing.mdx",slug:"/docs/installing",permalink:"/react-native-navigation/next/docs/installing",editUrl:"https://github.com/wix/react-native-navigation/edit/master/website/docs/docs/docs-Installing.mdx",version:"current",sidebar_label:"Installation",sidebar:"docs",previous:{title:"Before you start",permalink:"/react-native-navigation/next/docs/before-you-start"},next:{title:"Playground app",permalink:"/react-native-navigation/next/docs/playground-app"}},p=[{value:"Requirements",id:"requirements",children:[]},{value:"npm or yarn",id:"npm-or-yarn",children:[]},{value:"Installing with <code>npx rnn-link</code> (automatic installation)",id:"installing-with-npx-rnn-link-automatic-installation",children:[{value:"CocoaPods",id:"cocoapods",children:[]},{value:"Update index.js file",id:"update-indexjs-file",children:[]},{value:"Finish",id:"finish",children:[]}]},{value:"Manual Installation",id:"manual-installation",children:[{value:"iOS",id:"ios",children:[]},{value:"Android",id:"android",children:[]},{value:"App root",id:"app-root",children:[]}]},{value:"Troubleshooting",id:"troubleshooting",children:[{value:"Build app with gradle command",id:"build-app-with-gradle-command",children:[]},{value:"Force the same support library version across all dependencies",id:"force-the-same-support-library-version-across-all-dependencies",children:[]}]}],s={toc:p},d="wrapper";function u(e){let{components:t}=e,n=Object(i.a)(e,r);return Object(o.b)(d,Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"requirements"},"Requirements"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"node >= 18.18"),Object(o.b)("li",{parentName:"ul"},"react-native = 0.77 (0.78 - 0.80 support is in progress)"),Object(o.b)("li",{parentName:"ul"},"new architecture enabled (if you are not using the new architecture, you can still use react-native-navigation of version 7.x.x with react-native 0.73 and lower)")),Object(o.b)("h2",{id:"npm-or-yarn"},"npm or yarn"),Object(o.b)("p",null,"npm:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"npm install --save react-native-navigation\n")),Object(o.b)("p",null,"yarn:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"yarn add react-native-navigation\n")),Object(o.b)("h2",{id:"installing-with-npx-rnn-link-automatic-installation"},"Installing with ",Object(o.b)("inlineCode",{parentName:"h2"},"npx rnn-link")," (automatic installation)"),Object(o.b)("p",null,"You can benefit from autolinking for some of the necessary installation steps. But unlike most other libraries, react-native-navigation requires you to make a few changes to native files."),Object(o.b)("p",null,"We've simplified the process through a set of scripts. So to make all the necessary changes automatically, in your project's root folder run:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"npx rnn-link\n")),Object(o.b)("p",null,"Make sure to commit the changes introduced by the ",Object(o.b)("inlineCode",{parentName:"p"},"rnn-link")," script."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"The automatic linking is optimized for new applications created via the ",Object(o.b)("inlineCode",{parentName:"p"},"npx @react-native-community/cli@latest init")," command. If you are migrating from a version of react-native-navigation older than v7, it's recommended to check the steps manually after the script runs.")),Object(o.b)("p",null,"If one of the steps failed or you can't run (or are not comfortable with) the automatic scripts, you'll need to complete the relevant steps in the manual installation steps below, for both platforms."),Object(o.b)("h3",{id:"cocoapods"},"CocoaPods"),Object(o.b)("p",null,"After the the automatic scripts completed successfully, run pod install:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"pod install --project-directory=ios\n")),Object(o.b)("h3",{id:"update-indexjs-file"},"Update index.js file"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"index.js")," is typically used as an entry point into the app. It's first parsed and executed by the JS engine, therefore we'll want to show our UI from there."),Object(o.b)("p",null,"The following diff demonstrates changes needed to be made to ",Object(o.b)("inlineCode",{parentName:"p"},"index.js"),", initialized by ",Object(o.b)("inlineCode",{parentName:"p"},"react-native init"),"."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},"+import { Navigation } from \"react-native-navigation\";\n-import {AppRegistry} from 'react-native';\nimport App from \"./App\";\n-import {name as appName} from './app.json';\n\n-AppRegistry.registerComponent(appName, () => App);\n+Navigation.registerComponent('com.myApp.WelcomeScreen', () => App);\n\n+Navigation.events().registerAppLaunchedListener(() => {\n+   Navigation.setRoot({\n+     root: {\n+       stack: {\n+         children: [\n+           {\n+             component: {\n+               name: 'com.myApp.WelcomeScreen'\n+             }\n+           }\n+         ]\n+       }\n+     }\n+  });\n+});\n")),Object(o.b)("h3",{id:"finish"},"Finish"),Object(o.b)("p",null,"If you followed the steps successfully up to this point, then rebuild your application and you are good to go:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"react-native run-ios\nreact-native run-android\n")),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"This is a good moment to build your application in both platforms, validate that everything is working properly and commit your changes. If you're coming from a fresh ",Object(o.b)("inlineCode",{parentName:"p"},"npx @react-native-community/cli@latest init")," project, then you should be seeing the Welcome screen as usual, but under the hood your application is using react-native-navigation!"))),Object(o.b)("hr",null),Object(o.b)("h2",{id:"manual-installation"},"Manual Installation"),Object(o.b)("p",null,"If installation with ",Object(o.b)("inlineCode",{parentName:"p"},"npx rnn-link")," did not work, follow the manual installation steps below."),Object(o.b)("h3",{id:"ios"},"iOS"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Make sure your Xcode is updated. We recommend editing ",Object(o.b)("inlineCode",{parentName:"p"},".h"),", ",Object(o.b)("inlineCode",{parentName:"p"},".mm")," and ",Object(o.b)("inlineCode",{parentName:"p"},".swift")," files in Xcode as the IDE will usually point out common errors.")),Object(o.b)("h4",{id:"installation-with-cocoapods"},"Installation with CocoaPods"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"cd ios && pod install\n")),Object(o.b)("h4",{id:"native-installation"},"Native Installation"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Choose your implementation language"),": Depending on whether your project uses Swift or Objective-C, follow the appropriate section below. Most new React Native projects use Swift by default.")),Object(o.b)("h5",{id:"for-swift-projects"},"For Swift projects"),Object(o.b)("p",null,"In Xcode, you will need to update this file: ",Object(o.b)("inlineCode",{parentName:"p"},"AppDelegate.swift")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},"import UIKit\nimport React\n- import React_RCTAppDelegate\n+ import ReactNativeNavigation\nimport ReactAppDependencyProvider\n\n@main\n- class AppDelegate: RCTAppDelegate {\n+ class AppDelegate: RNNAppDelegate {\n...\n")),Object(o.b)("h5",{id:"for-objective-c-projects"},"For Objective-C projects"),Object(o.b)("p",null,"In Xcode, you will need to edit this file: ",Object(o.b)("inlineCode",{parentName:"p"},"AppDelegate.h"),". Its content should look like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},'#import <UIKit/UIKit.h>\n- #import <RCTAppDelegate.h>\n+ #import "RNNAppDelegate.h"\n\n- @interface AppDelegate : RCTAppDelegate\n+ @interface AppDelegate : RNNAppDelegate\n\n@end\n\n')),Object(o.b)("h3",{id:"android"},"Android"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Make sure your Android Studio installation is up to date. We recommend editing ",Object(o.b)("inlineCode",{parentName:"p"},"gradle")," and ",Object(o.b)("inlineCode",{parentName:"p"},"kotlin")," files in Android Studio as the IDE will suggest fixes and point out errors, this way you avoid most common pitfalls.")),Object(o.b)("h4",{id:"1-update-androidbuildgradle"},"1. Update ",Object(o.b)("inlineCode",{parentName:"h4"},"android/build.gradle"),":"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},'buildscript {\n    ext {\n        kotlinVersion = "2.0.21"\n+        RNNKotlinVersion = kotlinVersion\n        compileSdkVersion = 35\n        buildToolsVersion = "35.0.0"\n        minSdkVersion = 24\n        targetSdkVersion = 34\n        ndkVersion = "27.1.12297006"\n    }\n  repositories {\n        google()\n        mavenCentral()\n  }\n  dependencies {\n        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"\n        classpath("com.facebook.react:react-native-gradle-plugin")\n        classpath \'com.android.tools.build:gradle\'\n  }\n}\n\nallprojects {\n  repositories {\n   google()\n    maven {\n      // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n      url "$rootDir/../node_modules/react-native/android"\n    }\n  }\n}\n')),Object(o.b)("h4",{id:"2-update-mainactivitykt"},"2. Update ",Object(o.b)("inlineCode",{parentName:"h4"},"MainActivity.kt")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},'-import com.facebook.react.ReactActivity\n+import com.reactnativenavigation.NavigationActivity\n\n-class MainActivity : ReactActivity() {\n-    override fun getMainComponentName(): String {\n-        return "yourproject"\n-    }\n-}\n+class MainActivity : NavigationActivity()\n')),Object(o.b)("p",null,"If you have any ",Object(o.b)("strong",{parentName:"p"},"react-native")," related methods, you can safely delete them."),Object(o.b)("h4",{id:"3-update-mainapplicationkt"},"3. Update ",Object(o.b)("inlineCode",{parentName:"h4"},"MainApplication.kt")),Object(o.b)("p",null,"This file is located in ",Object(o.b)("inlineCode",{parentName:"p"},"android/app/src/main/java/com/<yourproject>/MainApplication.java"),"."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},'// ...\n\nimport com.facebook.react.PackageList\nimport com.facebook.react.ReactHost\nimport com.facebook.react.ReactNativeHost\nimport com.facebook.react.ReactPackage\nimport com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost\nimport com.reactnativenavigation.NavigationApplication\nimport com.reactnativenavigation.react.NavigationPackage\nimport com.reactnativenavigation.react.NavigationReactNativeHost\n\nclass MainApplication : NavigationApplication() {\n    override val reactNativeHost: ReactNativeHost =\n-        object : DefaultReactNativeHost(this) {\n+        object : NavigationReactNativeHost(this) {\n\n           override fun getPackages(): List<ReactPackage> =\n               PackageList(this).packages.apply {\n                 // Packages that cannot be autolinked yet can be added manually here, for example:\n                 // add(MyReactNativePackage())\n               }\n\n        override fun getJSMainModuleName(): String = "index"\n\n        override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG\n\n        override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED\n\n        override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED\n    }\n\n    override val reactHost: ReactHost\n        get() = getDefaultReactHost(this, reactNativeHost)\n\n    override fun onCreate() {\n        super.onCreate()\n-        SoLoader.init(this, OpenSourceMergedSoMapping)\n-        if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {\n-            // If you opted-in for the New Architecture, we load the native entry point for this app.\n-            load()\n-        }\n    }\n}\n\n')),Object(o.b)("h3",{id:"app-root"},"App root"),Object(o.b)("p",null,"Now that you're done, don't forget to update the ",Object(o.b)("inlineCode",{parentName:"p"},"index.js")," file, as ",Object(o.b)("a",{parentName:"p",href:"#update-indexjs-file"},"shown above"),"."),Object(o.b)("h2",{id:"troubleshooting"},"Troubleshooting"),Object(o.b)("h3",{id:"build-app-with-gradle-command"},"Build app with gradle command"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"prefered solution")," - The RNN flavor you would like to build is specified in ",Object(o.b)("inlineCode",{parentName:"p"},"app/build.gradle"),". Therefore in order to compile only that flavor, instead of building your entire project using ",Object(o.b)("inlineCode",{parentName:"p"},"./gradlew assembleDebug"),", you should instruct gradle to build the app module: ",Object(o.b)("inlineCode",{parentName:"p"},"./gradlew app:assembleDebug"),". The easiest way is to add a package.json command to build and install your debug Android APK ."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},'"scripts": {\n  // ...\n  "android": "cd ./android && ./gradlew app:assembleDebug && ./gradlew installDebug"\n}\n')),Object(o.b)("p",null,"Now run ",Object(o.b)("inlineCode",{parentName:"p"},"npm run android")," to build your application"),Object(o.b)("h3",{id:"force-the-same-support-library-version-across-all-dependencies"},"Force the same support library version across all dependencies"),Object(o.b)("p",null,"Some of your dependencies might require a different version of one of Google's support library packages. This results in compilation errors similar to this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:preDebugBuild'.\n> Android dependency 'com.android.support:design' has different version for the compile (25.4.0) and runtime (26.1.0) classpath. You should manually set the same version via DependencyResolution\n")),Object(o.b)("p",null,"To resolve these conflicts, add the following to your ",Object(o.b)("inlineCode",{parentName:"p"},"app/build.gradle"),":"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-groovy"},"android {\n    ...\n}\n\nconfigurations.all {\n    resolutionStrategy.eachDependency { DependencyResolveDetails details ->\n        def requested = details.requested\n        if (requested.group == 'com.android.support' && requested.name != 'multidex') {\n            details.useVersion \"${rootProject.ext.supportLibVersion}\"\n        }\n    }\n}\n\ndependencies {\n    ...\n    implementation 'com.android.support:design:25.4.0'\n    implementation \"com.android.support:appcompat-v7:${rootProject.ext.supportLibVersion}\"\n}\n\n")))}u.isMDXComponent=!0},785:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return g});var a=n(0),i=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=i.a.createContext({}),s=function(e){var t=i.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return i.a.createElement(p.Provider,{value:t},e.children)},u="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},m=i.a.forwardRef(function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(n),u=a,m=d["".concat(r,".").concat(u)]||d[u]||b[u]||o;return n?i.a.createElement(m,l(l({ref:t},p),{},{components:n})):i.a.createElement(m,l({ref:t},p))});function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:a,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);